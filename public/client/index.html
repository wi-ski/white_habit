<!DOCTYPE html>
<html lang="en">
<head>

  <link href="lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">

<body>
	<nav class="navbar navbar-inverse" role="navigation">
	  <div class="container">
	    <div class="navbar-header">
	      <a class="navbar-brand" href="#">HTTPS | The Fun Way</a>
	    </div>
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	    </div>
	  </div>
	</nav>


	<div class="col-md-3" >
		<div class="form-group">
		  <label for="privateKeyDisplay">Private Key</label>
	      <textarea id="privKeyDisplay" class="form-control custom-control" rows="3" style="resize:none" placeholder="Should be a private key..."></textarea>
	      <span class="input-group-addon btn btn-primary">                                                
				  Confirm
	      </span>
		</div>

		<div class="form-group">
		  <label for="publicKeyDisplay">Public Key</label>
	      <textarea id="pubKeyDisplay" class="form-control custom-control" rows="3" style="resize:none" placeholder="Should be a public key..."></textarea>
	      <span class="input-group-addon btn btn-primary">                                                
				  Confirm
	      </span>
		</div>
		<div id="generateKeys" class="text-center">
			<button id="generate" class="btn btn-primary">Generate New Keys</button>
		</div>


    <hr>

    <div class="form-group">

  		<div class="text-center">
        <button id="genCertificate" class="btn btn-primary">Generate Certificate</button>
  			<button id="sendTestMessage" class="btn btn-primary">TEST</button>
  		</div>
      <label >Certificate</label>
      <div id="certDisplay">
        
      </div>
    </div>

	</div>
	<div id="messagesContainer" class="col-md-6">







		<blockquote>
		  <p class="messageContent">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
		  <footer>CurrentUser! <cite title="Source Title">Public key...</cite></footer>
		</blockquote>

		<blockquote class="blockquote-reverse">
			<p class="messageContent">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
			<footer>Username2! <cite title="Source Title">Public key...</cite></footer>
		</blockquote>

	</div>

	<div class="col-md-3 usersList">
		<ul class="list-group">
		  <li class="list-group-item">
		  	<span class="label label-success label-as-badge">Session</span>
		  	Test Username
		  </li>
		  <li class="list-group-item">
		  	<span class="label label-success label-as-badge">Session</span>
		  	Test Username
		  </li>
		  <li class="list-group-item">
		  	<span class="label label-default label-as-badge">No Session</span>
		  	Test Username
		  </li>
		  <li class="list-group-item">
		  	<span class="label label-default label-as-badge">No Session</span>
		  	Test Username
		  </li>
		  <li class="list-group-item">
		  	<span class="label label-success label-as-badge">Session</span>
		  	Test Username
		  </li>
		</ul>
		
	</div>























</body>
    <script src="/socket.io/socket.io.js"></script>
    <script src="lib/underscore/underscore.js"></script>
    <script src="lib/jquery/dist/jquery.js"></script>
    <script src="lib/backbone/backbone.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.js"></script>





    <script src="client/models/App.js"></script>
    <script src="client/models/Certificate.js"></script>
    <script src="client/models/Message.js"></script>
    <script src="client/models/PublicKey.js"></script>
    <script src="client/models/User.js"></script>
    <script src="client/collections/Messages.js"></script>
    <script src="client/collections/PublicKeys.js"></script>
    <script src="client/collections/Users.js"></script>
    <script src="client/views/AppView.js"></script>
    <script src="client/views/CertificateView.js"></script>
    <script src="client/views/MessagesView.js"></script>
    <script src="client/views/MessageView.js"></script>
    <script src="client/views/PublicKeyView.js"></script>
    <script src="client/views/UsersView.js"></script>
    <script src="client/views/UserView.js"></script>




    <script src="client/jsencrypt.js"></script>
    <script src="client/sha256.js"></script>
    <script src="client/app.js"></script>

		<script>
		$(document).ready(function(){
			var encrypt =  new JSEncrypt();
			var decrypt = new JSEncrypt();

			$("#generateKeys").click(function(){
        var pubKey = encrypt.getPublicKeyB64();
        var privKey = encrypt.getPrivateKeyB64();
				$("#pubKeyDisplay").val(pubKey);
				$("#privKeyDisplay").val(privKey);
			})
		







			$("#sendTestMessage").click(function(){

				encrypt.setPublicKey($("#pubKeyDisplay").val());
        var messageToEncypt = "TESTTESTSETSETSET";
				// var messageToEncypt = $("#testMessage").val();

				var encryptedMessage = encrypt.encrypt(messageToEncypt);
				console.log("ENCRYPTED MESSAGE: ",encryptedMessage)

				decrypt.setPrivateKey($("#privKeyDisplay").val());
				var decryptedMessage = decrypt.decrypt(encryptedMessage);

				console.log(decryptedMessage)
				$("#testMessageRecieve").text(decryptedMessage);


			})


		})






		// $(document).ready(function(){
		// 	var socket = io.connect("127.0.0.0:8080");
		// 	$("#chat").hide();
		// 	$("#name").focus();
		// 	$("form").submit(function(event){
	 //    		event.preventDefault();
		// 	});

		// 	$("#join").click(function(){
		// 		var name = $("#name").val();
		// 		if (name != "") {
		// 			socket.emit("join", name);
		// 			$("#login").detach();
		// 			$("#chat").show();
		// 			$("#msg").focus();
		// 			ready = true;
		// 		}
		// 	});

		// 	$("#name").keypress(function(e){
		// 		if(e.which == 13) {
		// 			var name = $("#name").val();
		// 			if (name != "") {
		// 				socket.emit("join", name);
		// 				ready = true;
		// 				$("#login").detach();
		// 				$("#chat").show();
		// 				$("#msg").focus();
		// 			}
		// 		}
		// 	});

		// 	socket.on("update", function(msg) {
		// 		if(ready)
		// 			$("#msgs").append("<li>" + msg + "</li>");
		// 	})

		// 	socket.on("update-people", function(people){
		// 		if(ready) {
		// 			$("#people").empty();
		// 			$.each(people, function(clientid, name) {
		// 				$('#people').append("<li>" + name + "</li>");
		// 			});
		// 		}
		// 	});

		// 	socket.on("chat", function(who, msg){
		// 		if(ready) {
		// 			$("#msgs").append("<li><strong><span class='text-success'>" + who + "</span></strong> says: " + msg + "</li>");
		// 		}
		// 	});

		// 	socket.on("disconnect", function(){
		// 		$("#msgs").append("<li><strong><span class='text-warning'>The server is not available</span></strong></li>");
		// 		$("#msg").attr("disabled", "disabled");
		// 		$("#send").attr("disabled", "disabled");
		// 	});


		// 	$("#send").click(function(){
		// 		var msg = $("#msg").val();
		// 		socket.emit("send", msg);
		// 		$("#msg").val("");
		// 	});

		// 	$("#msg").keypress(function(e){
		// 		if(e.which == 13) {
		// 			var msg = $("#msg").val();
		// 			socket.emit("send", msg);
		// 			$("#msg").val("");
		// 		}
		// 	});

		// });
	</script>
</html>
